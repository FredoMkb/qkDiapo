/* qkDiapo - 0402 (03-2013) - Little slideshow script with jQuery - FredoMkb (c) 2013 (http://fredomkb.free.fr/) - Free and open-source project - http://refresh-sf.com/yui/ */
(function($){var nQkd=0;$.fn.qkdiapo=function(oOptions){nQkd++;var sP=".";var sD="#";var sR="\n";var oDefauts={slide_tag:"*",fade_time:600,show_time:4000,add_time:6000,add_class:"add",sort_random:true,nav_auto:true,nav_keys:true,nav_inner:true,nav_outer:true,z:0};var oParams=$.extend(oDefauts,oOptions);return this.each(function(nItm){var rTemp=null;var oThis=$(this);var oCfg={oObj:oThis,oSrc:oThis.find("> "+oParams.slide_tag),oNav:null,oPrv:null,oNxt:null,oInf:null,sObj:"qkdiapo",sNav:"qkdiapo_nav",sPrv:"qkdiapo_prv",sNxt:"qkdiapo_nxt",sInf:"qkdiapo_inf",nSrc:oThis.find("> "+oParams.slide_tag).length,nNro:0,nItr:1,bTmp:true,nFde:(oParams.fade_time<200)?200:oParams.fade_time,nShw:(oParams.show_time<1000)?1000:oParams.show_time,nAdd:(oParams.add_time<1000)?1000:oParams.add_time,sAdd:oParams.add_class,bRnd:oParams.sort_random,bOto:(!oParams.nav_keys&&!oParams.nav_inner&&!oParams.nav_outer)?true:oParams.nav_auto,bKey:(!oParams.nav_auto&&!oParams.nav_inner&&!oParams.nav_outer)?true:oParams.nav_keys,bInn:(!oParams.nav_auto&&!oParams.nav_keys&&!oParams.nav_outer)?true:oParams.nav_inner,bOut:(!oParams.nav_auto&&!oParams.nav_keys&&!oParams.nav_inner)?true:oParams.nav_outer,oCss:{oObj:{"position":"relative","overflow":"hidden"},oSrc:{"top":0,"left":0,"position":"absolute","overflow":"auto"}},z:0};oCfg.oObj.addClass(oCfg.sObj);if(oCfg.nSrc<2){return false;}oCfg.oObj.css(oCfg.oCss.oObj);if(oCfg.bOut){qkdiapo_nav();oCfg.oInf.text((oCfg.nNro+1)+"/"+oCfg.nSrc);}qkdiapo_events();if(oCfg.bRnd){oCfg.oSrc=qkdiapo_random(oCfg.oSrc);}var nSee=oCfg.nShw;if(oCfg.oSrc.eq(0).hasClass(oCfg.sAdd)){nSee=oCfg.nShw+oCfg.nAdd;}oCfg.oSrc.css(oCfg.oCss.oSrc);oCfg.oSrc.hide(0);oCfg.oSrc.eq(0).show(0);if(oCfg.bOto){rTemp=setTimeout(qkdiapo_show,nSee);}function qkdiapo_show(){var oNow=$(oCfg.oSrc).eq(oCfg.nNro);oCfg.nNro+=oCfg.nItr;if(oCfg.nNro>(oCfg.nSrc-1)){oCfg.nNro=0;}if(oCfg.nNro<0){oCfg.nNro=(oCfg.nSrc-1);}var oNew=$(oCfg.oSrc).eq(oCfg.nNro);oCfg.nItr=1;var nSee=oCfg.nShw;if(oNew.hasClass(oCfg.sAdd)){nSee=oCfg.nShw+oCfg.nAdd;}oNow.fadeOut(oCfg.nFde);oNew.fadeIn(oCfg.nFde);if(oCfg.bOut){oCfg.oInf.text((oCfg.nNro+1)+"/"+oCfg.nSrc);}if((oCfg.bTmp)&&(oCfg.bOto)){rTemp=setTimeout(qkdiapo_show,nSee);}}function qkdiapo_random(aO){var sT,nC,nN=aO.length;while(--nN){nC=Math.floor(Math.random()*(nN+1));sT=aO[nC];aO[nC]=aO[nN];aO[nN]=sT;}return aO;}function qkdiapo_nav(){var sHtml=sR+'<div class="'+oCfg.sNav+'"><span class="'+oCfg.sPrv+'">&nbsp;</span><span class="'+oCfg.sNxt+'">&nbsp;</span><span class="'+oCfg.sInf+'">&nbsp;</span></div><!--.'+oCfg.sNav+"-->"+sR;oCfg.oObj.after(sHtml);oCfg.oNav=oCfg.oObj.next(sP+oCfg.sNav);oCfg.oPrv=oCfg.oNav.children(sP+oCfg.sPrv);oCfg.oNxt=oCfg.oNav.children(sP+oCfg.sNxt);oCfg.oInf=oCfg.oNav.children(sP+oCfg.sInf);}function qkdiapo_events(){if(oCfg.bOto){oCfg.oObj.hover(function(){clearTimeout(rTemp);oCfg.bTmp=false;return false;},function(){oCfg.bTmp=true;if(oCfg.bOto){rTemp=setTimeout(qkdiapo_show,oCfg.nShw/2);}return false;});}if(oCfg.bInn){var bxX=oCfg.oObj.offset().left;var bxW=oCfg.oObj.width();oCfg.oObj.mousemove(function(e){var pgX=e.pageX;if((pgX-bxX)<(bxW/2)){$(this).removeClass("nav_nxt").addClass("nav_prv");}else{$(this).removeClass("nav_prv").addClass("nav_nxt");}});oCfg.oObj.click(function(e){e.stopPropagation();var pgX=e.pageX;if((pgX-bxX)<(bxW/2)){oCfg.nItr=-1;}else{oCfg.nItr=1;}qkdiapo_show();return false;});}if((oCfg.bKey)&&(nQkd<2)){$(document).keydown(function(e){var nKey=e.keyCode;if((nKey>36)&&(nKey<41)){clearTimeout(rTemp);oCfg.nItr=(nKey>38)?1:-1;qkdiapo_show();return false;}});}if(oCfg.bOut){oCfg.oNav.hover(function(){clearTimeout(rTemp);oCfg.bTmp=false;return false;},function(){oCfg.bTmp=true;if(oCfg.bOto){rTemp=setTimeout(qkdiapo_show,oCfg.nShw/2);}return false;});oCfg.oPrv.click(function(){clearTimeout(rTemp);oCfg.nItr=-1;oCfg.bTmp=false;qkdiapo_show();return false;});oCfg.oNxt.click(function(){clearTimeout(rTemp);oCfg.nItr=1;oCfg.bTmp=false;qkdiapo_show();return false;});}}});};})(jQuery);